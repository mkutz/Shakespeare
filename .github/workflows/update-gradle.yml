name: Update Gradle Wrapper

on:
  workflow_dispatch:
  schedule:
    - cron: 0 5 * * *

jobs:
  update-gradle:
    
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: 17
          overwrite-settings: false

      - uses: actions/checkout@v3

      - uses: gradle/gradle-build-action@v2
        with:
          gradle-version: current
          arguments: wrapper

      - name: Push changes
        run: |
          git config user.name "Gradle Updater"
          git config user.email "mail@michael-kutz.de"
          git switch -c update-gradle
          git add gradle gradlew
          git commit -m "Bump Gradle wrapper to latest"
          git push --set-upstream origin $(git rev-parse --abbrev-ref HEAD)
